(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{1240:function(e,r,t){Promise.resolve().then(t.bind(t,4657))},6463:function(e,r,t){"use strict";var s=t(1169);t.o(s,"redirect")&&t.d(r,{redirect:function(){return s.redirect}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},4657:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var s=t(7437),a=t(2265),o=t(998),n=t(6463),l=t(1942),c=t(3580),i=e=>{let r,{isOpen:t,onClose:o,propsOrder:n,onOrderUpdate:i}=e,[d,u]=(0,a.useState)(["Atendimento","Producao","Finalizado"]),[m,b]=(0,a.useState)();async function h(e){e.preventDefault();let r={id:n.id,name:n.name,bread:n.bread,meat:n.meat,salad:n.salad,sauce:n.sauce,status:m||n.status};try{let e=await fetch("http://burgermonapp.somee.com/api/Order/order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw Error("Network response was not ok");let t=await e.json();!0===t.flag&&(c.Am.success("Pedido atualizado"),i(),o()),console.log("Deu bom",t)}catch(e){console.log("erro dado",e)}}return t?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-75",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Status Pedido"}),(0,s.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-red-700 text-lg",children:(0,s.jsx)(l.GjQ,{})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("form",{className:"space-y-4",onSubmit:h,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select0",className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,s.jsx)("select",{id:"select0",value:n.name,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:(0,s.jsx)("option",{value:n.name,children:n.name})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select1",className:"block text-sm font-medium text-gray-700",children:"P\xe3o"}),(0,s.jsx)("select",{id:"select1",value:n.bread,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:(0,s.jsx)("option",{value:n.bread,children:n.bread})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select2",className:"block text-sm font-medium text-gray-700",children:"Carne"}),(0,s.jsx)("select",{id:"select2",value:n.meat,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:(0,s.jsx)("option",{value:n.meat,children:n.meat})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select3",className:"block text-sm font-medium text-gray-700",children:"Salada"}),(0,s.jsx)("select",{id:"select3",value:n.salad,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:(0,s.jsx)("option",{value:n.salad,children:n.salad})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select4",className:"block text-sm font-medium text-gray-700",children:"Molho"}),(0,s.jsx)("select",{id:"select4",value:n.sauce,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:(0,s.jsx)("option",{value:n.sauce,children:n.sauce})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"select5",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,s.jsxs)("select",{id:"select5",value:m,onChange:e=>b(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 hover:border-amber-400 rounded-md shadow-sm focus:outline-none focus:ring-amber-400 focus:border-amber-400 sm:text-sm",children:[(0,s.jsx)("option",{value:n.status,children:n.status}),(r=n.status,d.filter(e=>e!==r)).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"bg-zinc-800 hover:bg-white hover:text-black border-2 border-transparent hover:border-black transition duration-500 text-amber-400 font-bold py-2 px-4 rounded",children:"Atualizar Status"})})]})})]})}):null},d=e=>{let{isOpen:r,onClose:t,propsOrder:a,onOrderUpdate:o}=e;async function n(e){try{let r=await fetch("http://burgermonapp.somee.com/api/Order/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await r.json();!0===s.flag?(c.Am.success("Pedido finalizado"),o(),t()):c.Am.error("Erro ao finalizar pedido")}catch(e){console.log("Erro ao cancelar pedido:",e),c.Am.error("Erro ao cancelar pedido")}}return r?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-75",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Deseja finalizar este pedido?"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-red-700 text-lg",children:(0,s.jsx)(l.GjQ,{})})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-10 mt-4 mb-4",children:[(0,s.jsx)("button",{onClick:()=>n(a.id),className:"bg-green-600 hover:bg-green-500 hover:text border-2 border-transparent hover:border-black transition duration-500 text-black font-bold py-1 px-6 rounded",children:"Sim"}),(0,s.jsx)("button",{onClick:t,className:"bg-red-600 hover:bg-red-500 hover:text-black border-2 border-transparent hover:border-black transition duration-500 text-black font-bold py-1 px-6 rounded",children:"N\xe3o"})]})]})}):null};function u(){(0,n.useRouter)();let{data:e,status:r}=(0,o.useSession)({required:!0,onUnauthenticated(){(0,n.redirect)("/burger-login")}});if("Loading"===r)return"Loading";e&&!e.isAdmin&&(0,n.redirect)("/burger-order");let[t,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1),[m,b]=(0,a.useState)(null),[h,x]=(0,a.useState)(!1),p=async()=>{try{let e=await fetch("http://burgermonapp.somee.com/api/Order"),r=await e.json();if(!0===r.flag){l(r.data),console.log(r.data,"Req feita");return}console.log("ocorreu algum erro")}catch(e){console.log(e)}};(0,a.useEffect)(()=>{p()},[]);let f=e=>{b(e),u(!0)},j=e=>{b(e),x(!0)},g=()=>{p(),u(!1)};return"loading"===r?(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 border-8 border-t-8 border-amber-400 border-opacity-1 border-t-white rounded-full animate-spin"})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex justify-center mt-[30px]",children:[(0,s.jsxs)("table",{className:"min-w-[1400px] ",children:[(0,s.jsx)("thead",{className:"border-b-2 border-black mb-4",children:(0,s.jsxs)("tr",{className:"text-left",children:[(0,s.jsx)("th",{className:"p-2 w-1/6",children:"Cliente:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"P\xe3o:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"Carne:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"Salada:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"Molho:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"Status:"}),(0,s.jsx)("th",{className:"p-2 w-1/6",children:"A\xe7\xf5es:"})]})}),(0,s.jsx)("tbody",{className:"space-y-2",children:t.length>0?t.map(e=>(0,s.jsxs)("tr",{className:"text-left hover:bg-gray-100 mt-6",children:[(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.name}),(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.bread}),(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.meat}),(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.salad}),(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.sauce}),(0,s.jsx)("td",{className:"p-2 w-1/12",children:e.status}),(0,s.jsxs)("td",{className:"p-2 w-[350px] flex space-x-4 ",children:[(0,s.jsxs)("button",{className:"bg-zinc-800 hover:bg-zinc-950 hover:text-white cursor-pointer text-amber-400 py-1 rounded-lg w-[140px]",onClick:()=>f(e),children:[" ","Alterar status"]}),(0,s.jsx)("button",{className:"bg-green-800 hover:bg-green-700  cursor-pointer text-white py-1 rounded-lg w-[140px]",onClick:()=>j(e),children:"Finalizar pedido"})]})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"p-2 text-center",children:"Nenhum pedido encontrado"})})})]}),(0,s.jsx)(i,{isOpen:c,onClose:()=>u(!1),propsOrder:m,onOrderUpdate:g}),(0,s.jsx)(d,{isOpen:h,onClose:()=>x(!1),propsOrder:m,onOrderUpdate:g})]})})}},1810:function(e,r,t){"use strict";t.d(r,{w_:function(){return d}});var s=t(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=s.createContext&&s.createContext(a),n=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,s)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach(function(r){var s,a;s=r,a=t[r],(s=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function d(e){return r=>s.createElement(u,l({attr:i({},e.attr)},r),function e(r){return r&&r.map((r,t)=>s.createElement(r.tag,i({key:t},r.attr),e(r.child)))}(e.child))}function u(e){var r=r=>{var t,{attr:a,size:o,title:c}=e,d=function(e,r){if(null==e)return{};var t,s,a=function(e,r){if(null==e)return{};var t={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;t[s]=e[s]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,n),u=o||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,d,{className:t,style:i(i({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==o?s.createElement(o.Consumer,null,e=>r(e)):r(a)}}},function(e){e.O(0,[699,998,580,971,23,744],function(){return e(e.s=1240)}),_N_E=e.O()}]);